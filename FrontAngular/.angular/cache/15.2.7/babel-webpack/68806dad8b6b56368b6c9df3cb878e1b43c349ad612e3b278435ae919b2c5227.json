{"ast":null,"code":"import _asyncToGenerator from \"E:/AceleraPL/AceleraPlenoAngular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../services/token.service\";\nimport * as i2 from \"src/app/services/cliente/cliente.service\";\nimport * as i3 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(tokenService, clienteService) {\n    this.tokenService = tokenService;\n    this.clienteService = clienteService;\n    this.token = '';\n    this.cpf = '';\n  }\n  ngOnInit() {}\n  entrar() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.GetCliente(_this.cpf);\n      setTimeout(() => {\n        if (_this.mesas.length > 0) {\n          alert('Parabuains, Asmuei');\n        } else {\n          alert('Não localizado');\n        }\n      }, 700);\n    })();\n  }\n  GetCliente(cpf) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.tokenService.getToken().subscribe(tokenUser => {\n        _this2.token = tokenUser.token;\n        _this2.clienteService.getClienteByCPF(cpf, _this2.token).subscribe(mesa => {\n          _this2.mesas = mesa;\n          console.log(_this2.mesas);\n        });\n      });\n    })();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.TokenService), i0.ɵɵdirectiveInject(i2.ClienteService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 5,\n  vars: 1,\n  consts: [[\"for\", \"cpf\"], [\"type\", \"text\", \"id\", \"cpf\", \"name\", \"cpf\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"label\", 0);\n      i0.ɵɵtext(1, \"CPF\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_2_listener($event) {\n        return ctx.cpf = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_3_listener() {\n        return ctx.entrar();\n      });\n      i0.ɵɵtext(4, \"Entrar\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.cpf);\n    }\n  },\n  dependencies: [i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;AAcA,OAAM,MAAOA,cAAc;EAKzBC,YACUC,YAA0B,EAC1BC,cAA8B;IAD9B,iBAAY,GAAZD,YAAY;IACZ,mBAAc,GAAdC,cAAc;IANxB,UAAK,GAAW,EAAE;IAEX,QAAG,GAAW,EAAE;EAKpB;EAEHC,QAAQ,IAAI;EAENC,MAAM;IAAA;IAAA;MACV,KAAI,CAACC,UAAU,CAAC,KAAI,CAACC,GAAG,CAAC;MACzBC,UAAU,CAAC,MAAK;QACd,IAAI,KAAI,CAACC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;UACzBC,KAAK,CAAC,oBAAoB,CAAC;SAC5B,MAAM;UACLA,KAAK,CAAC,gBAAgB,CAAC;;MAE3B,CAAC,EAAE,GAAG,CAAC;IAAC;EACV;EAEML,UAAU,CAACC,GAAW;IAAA;IAAA;MAC1B,MAAI,CAACL,YAAY,CAACU,QAAQ,EAAE,CAACC,SAAS,CAAEC,SAAS,IAAI;QACnD,MAAI,CAACC,KAAK,GAAGD,SAAS,CAACC,KAAK;QAC5B,MAAI,CAACZ,cAAc,CAChBa,eAAe,CAACT,GAAG,EAAE,MAAI,CAACQ,KAAK,CAAC,CAChCF,SAAS,CAAEI,IAAY,IAAI;UAC1B,MAAI,CAACR,KAAK,GAAGQ,IAAI;UACjBC,OAAO,CAACC,GAAG,CAAC,MAAI,CAACV,KAAK,CAAC;QACzB,CAAC,CAAC;MACN,CAAC,CAAC;IAAC;EACL;;AAjCWT,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAoB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCdzBC,gCAAiB;MAAAA,mBAAG;MAAAA,iBAAQ;MAC5BA,gCAA2D;MAApBA;QAAA;MAAA,EAAiB;MAAxDA,iBAA2D;MAC3DA,iCAA2B;MAAnBA;QAAA,OAASC,YAAQ;MAAA,EAAC;MAACD,sBAAM;MAAAA,iBAAS;;;MADHA,eAAiB;MAAjBA,iCAAiB","names":["LoginComponent","constructor","tokenService","clienteService","ngOnInit","entrar","GetCliente","cpf","setTimeout","mesas","length","alert","getToken","subscribe","tokenUser","token","getClienteByCPF","mesa","console","log","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["E:\\AceleraPL\\AceleraPlenoAngular\\src\\app\\component\\login\\login.component.ts","E:\\AceleraPL\\AceleraPlenoAngular\\src\\app\\component\\login\\login.component.html"],"sourcesContent":["import { Mesa } from 'src/app/models/mesa';\r\nimport { Observable, lastValueFrom, firstValueFrom, Subscription } from 'rxjs';\r\nimport { TokenService } from './../../services/token.service';\r\nimport { ClienteService } from 'src/app/services/cliente/cliente.service';\r\nimport { Cliente } from './../../models/cliente';\r\nimport { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Tokenretorno } from 'src/app/models/tokenretorno';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css'],\r\n})\r\nexport class LoginComponent {\r\n  token: string = '';\r\n  mesas: Mesa[];\r\n  public cpf: string = '';\r\n\r\n  constructor(\r\n    private tokenService: TokenService,\r\n    private clienteService: ClienteService\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  async entrar() {\r\n    this.GetCliente(this.cpf);\r\n    setTimeout(() => {\r\n      if (this.mesas.length > 0) {\r\n        alert('Parabuains, Asmuei');\r\n      } else {\r\n        alert('Não localizado');\r\n      }\r\n    }, 700);\r\n  }\r\n\r\n  async GetCliente(cpf: string) {\r\n    this.tokenService.getToken().subscribe((tokenUser) => {\r\n      this.token = tokenUser.token;\r\n      this.clienteService\r\n        .getClienteByCPF(cpf, this.token)\r\n        .subscribe((mesa: Mesa[]) => {\r\n          this.mesas = mesa;\r\n          console.log(this.mesas);\r\n        });\r\n    });\r\n  }\r\n}\r\n","  <label for=\"cpf\">CPF</label>\r\n  <input type=\"text\" id=\"cpf\" name=\"cpf\" [(ngModel)]=\"cpf\" />\r\n  <button (click)=\"entrar()\">Entrar</button>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}