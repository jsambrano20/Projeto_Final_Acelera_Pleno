{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/token.service\";\nimport * as i2 from \"src/app/services/pedido/pedido.service\";\nimport * as i3 from \"./../../services/transporte/transporte-service.service\";\nfunction PedidosComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"figure\");\n    i0.ɵɵelement(3, \"img\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function PedidosComponent_div_0_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.Cancelar(item_r1.id));\n    });\n    i0.ɵɵtext(12, \"Cancelar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"data:image/jpeg;base64,\", item_r1.pratos.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r1.pratos.descricao);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"R$: \", item_r1.pratos.valor, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.quantidade);\n  }\n}\nexport class PedidosComponent {\n  constructor(tokenService, pedidosService, transporte) {\n    this.tokenService = tokenService;\n    this.pedidosService = pedidosService;\n    this.transporte = transporte;\n    this.idMesa = '';\n    this.cpf = '';\n  }\n  ngOnInit() {\n    this.TrazerDados();\n  }\n  TrazerDados() {\n    this.transporte.getObjeto().subscribe(obj => {\n      this.mesas = obj;\n      this.cpf = this.mesas[0].clientes.cpf;\n      this.idMesa = this.mesas[0].id;\n      console.log(this.mesas);\n      this.GetPedidosCPfMesa();\n    });\n    setTimeout(() => {\n      this.GetPedidosCPfMesa();\n    }, 800);\n  }\n  Cancelar(id) {\n    this.tokenService.getToken().subscribe(tokenUser => {\n      this.token = tokenUser.token;\n      debugger;\n      this.pedidosService.cancelarPedido(id, tokenUser.token).subscribe(pedidos => {\n        this.pedido = pedidos;\n        console.log(this.pedidos);\n        this.GetPedidosCPfMesa();\n      });\n    });\n  }\n  GetPedidosCPfMesa() {\n    console.log('Tazendo pedidos');\n    this.tokenService.getToken().subscribe(tokenUser => {\n      this.token = tokenUser.token;\n      this.pedidosService.getPedidosByMesaCPF(this.cpf, this.idMesa, this.token).subscribe(pedidos => {\n        this.pedidos = pedidos;\n        console.log(this.pedidos);\n      });\n    });\n  }\n}\nPedidosComponent.ɵfac = function PedidosComponent_Factory(t) {\n  return new (t || PedidosComponent)(i0.ɵɵdirectiveInject(i1.TokenService), i0.ɵɵdirectiveInject(i2.PedidoService), i0.ɵɵdirectiveInject(i3.TransporteServiceService));\n};\nPedidosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PedidosComponent,\n  selectors: [[\"app-pedidos\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [1, \"\"], [1, \"blog-box\"], [3, \"src\"], [1, \"travel\"], [3, \"click\"]],\n  template: function PedidosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, PedidosComponent_div_0_Template, 13, 4, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.pedidos);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;IAAAA,8BAA2C;IAE/BA,yBAA2D;IAAAA,iBAAS;IAC5EA,8BAAoB;IACZA,YAA2B;IAAAA,iBAAO;IAE1CA,0BAAI;IAAAA,YAA2B;IAAAA,iBAAK;IACpCA,yBAAG;IAAAA,aAAqB;IAAAA,iBAAI;IAC5BA,kCAAoC;IAA5BA;MAAA;MAAA;MAAA;MAAA,OAASA,0CAAiB;IAAA,EAAC;IAACA,yBAAQ;IAAAA,iBAAS;;;;IANxCA,eAAmD;IAAnDA,sGAAmD;IAExDA,eAA2B;IAA3BA,8CAA2B;IAE/BA,eAA2B;IAA3BA,uDAA2B;IAC5BA,eAAqB;IAArBA,wCAAqB;;;ACM5B,OAAM,MAAOC,gBAAgB;EAU3BC,YACUC,YAA0B,EAC1BC,cAA6B,EAC7BC,UAAoC;IAFpC,iBAAY,GAAZF,YAAY;IACZ,mBAAc,GAAdC,cAAc;IACd,eAAU,GAAVC,UAAU;IARpB,WAAM,GAAW,EAAE;IACnB,QAAG,GAAW,EAAE;EAQb;EAEHC,QAAQ;IACN,IAAI,CAACC,WAAW,EAAE;EAEpB;EAEAA,WAAW;IAET,IAAI,CAACF,UAAU,CAACG,SAAS,EAAE,CAACC,SAAS,CAAEC,GAAG,IAAI;MAC5C,IAAI,CAACC,KAAK,GAAGD,GAAG;MAChB,IAAI,CAACE,GAAG,GAAG,IAAI,CAACD,KAAK,CAAC,CAAC,CAAC,CAACE,QAAQ,CAACD,GAAG;MACrC,IAAI,CAACE,MAAM,GAAG,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC,CAACI,EAAE;MAC9BC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACN,KAAK,CAAC;MACvB,IAAI,CAACO,iBAAiB,EAAE;IAC1B,CAAC,CAAC;IACFC,UAAU,CAAC,MAAI;MACb,IAAI,CAACD,iBAAiB,EAAE;IAC1B,CAAC,EAAC,GAAG,CAAC;EAER;EAEAE,QAAQ,CAACL,EAAU;IACjB,IAAI,CAACZ,YAAY,CAACkB,QAAQ,EAAE,CAACZ,SAAS,CAAEa,SAAS,IAAI;MACnD,IAAI,CAACC,KAAK,GAAGD,SAAS,CAACC,KAAK;MAC5B;MACA,IAAI,CAACnB,cAAc,CAChBoB,cAAc,CAACT,EAAE,EAACO,SAAS,CAACC,KAAK,CAAC,CAClCd,SAAS,CAAEgB,OAAgB,IAAI;QAC9B,IAAI,CAACC,MAAM,GAAGD,OAAO;QACrBT,OAAO,CAACC,GAAG,CAAC,IAAI,CAACQ,OAAO,CAAC;QACzB,IAAI,CAACP,iBAAiB,EAAE;MAC1B,CAAC,CAAC;IACN,CAAC,CAAC;EACJ;EAEAA,iBAAiB;IACfF,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAC9B,IAAI,CAACd,YAAY,CAACkB,QAAQ,EAAE,CAACZ,SAAS,CAAEa,SAAS,IAAI;MACnD,IAAI,CAACC,KAAK,GAAGD,SAAS,CAACC,KAAK;MAC5B,IAAI,CAACnB,cAAc,CAChBuB,mBAAmB,CAAC,IAAI,CAACf,GAAG,EAAE,IAAI,CAACE,MAAM,EAAE,IAAI,CAACS,KAAK,CAAC,CACtDd,SAAS,CAAEgB,OAAkB,IAAI;QAChC,IAAI,CAACA,OAAO,GAAGA,OAAO;QACtBT,OAAO,CAACC,GAAG,CAAC,IAAI,CAACQ,OAAO,CAAC;MAC3B,CAAC,CAAC;IACN,CAAC,CAAC;EACJ;;AA7DWxB,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAA2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDb7BhC,kEAUM;;;MAVyBA,qCAAU","names":["i0","PedidosComponent","constructor","tokenService","pedidosService","transporte","ngOnInit","TrazerDados","getObjeto","subscribe","obj","mesas","cpf","clientes","idMesa","id","console","log","GetPedidosCPfMesa","setTimeout","Cancelar","getToken","tokenUser","token","cancelarPedido","pedidos","pedido","getPedidosByMesaCPF","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["E:\\AceleraPL\\AceleraPlenoAngular\\src\\app\\component\\pedidos\\pedidos.component.html","E:\\AceleraPL\\AceleraPlenoAngular\\src\\app\\component\\pedidos\\pedidos.component.ts"],"sourcesContent":["<div class=\"\" *ngFor=\"let item of pedidos\">\r\n  <div class=\"blog-box\">\r\n    <figure><img src=\"data:image/jpeg;base64,{{ item.pratos.foto }}\" /></figure>\r\n    <div class=\"travel\">\r\n      <span>{{ item.pratos.descricao }}</span>\r\n    </div>\r\n    <h3>R$: {{ item.pratos.valor }}</h3>\r\n    <p>{{ item.quantidade }}</p>\r\n    <button (click)=\"Cancelar(item.id)\">Cancelar</button>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { Pedidos } from 'src/app/models/pedidos';\r\nimport { RealizarPedido } from 'src/app/models/realizar-pedido';\r\nimport { PedidoService } from 'src/app/services/pedido/pedido.service';\r\nimport { TokenService } from 'src/app/services/token.service';\r\nimport { TransporteServiceService } from './../../services/transporte/transporte-service.service';\r\nimport { Mesa } from 'src/app/models/mesa';\r\n\r\n@Component({\r\n  selector: 'app-pedidos',\r\n  templateUrl: './pedidos.component.html',\r\n  styleUrls: ['./pedidos.component.css'],\r\n})\r\nexport class PedidosComponent {\r\n  token: string;\r\n  pedidos: Pedidos[];\r\n  pedido: Pedidos;\r\n  mesas: Mesa[];\r\n  idMesa: string = '';\r\n  cpf: string = '';\r\n\r\n\r\n\r\n  constructor(\r\n    private tokenService: TokenService,\r\n    private pedidosService: PedidoService,\r\n    private transporte: TransporteServiceService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.TrazerDados();\r\n\r\n  }\r\n\r\n  TrazerDados() {\r\n\r\n    this.transporte.getObjeto().subscribe((obj) => {\r\n      this.mesas = obj;\r\n      this.cpf = this.mesas[0].clientes.cpf;\r\n      this.idMesa = this.mesas[0].id;\r\n      console.log(this.mesas);\r\n      this.GetPedidosCPfMesa();\r\n    });\r\n    setTimeout(()=>{\r\n      this.GetPedidosCPfMesa();\r\n    },800)\r\n\r\n  }\r\n\r\n  Cancelar(id: string) {\r\n    this.tokenService.getToken().subscribe((tokenUser) => {\r\n      this.token = tokenUser.token;\r\n      debugger\r\n      this.pedidosService\r\n        .cancelarPedido(id,tokenUser.token)\r\n        .subscribe((pedidos: Pedidos) => {\r\n          this.pedido = pedidos;\r\n          console.log(this.pedidos);\r\n          this.GetPedidosCPfMesa()\r\n        });\r\n    });\r\n  }\r\n\r\n  GetPedidosCPfMesa() {\r\n    console.log('Tazendo pedidos')\r\n    this.tokenService.getToken().subscribe((tokenUser) => {\r\n      this.token = tokenUser.token;\r\n      this.pedidosService\r\n        .getPedidosByMesaCPF(this.cpf, this.idMesa, this.token)\r\n        .subscribe((pedidos: Pedidos[]) => {\r\n          this.pedidos = pedidos;\r\n          console.log(this.pedidos);\r\n        });\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}